{% extends "structures/1column.html" %}

{% block title %}SAPU - Proyectos{% endblock %}

{% block main-content %}

<div class="projects-container content container">

    <h1>PROYECTOS</h1>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <form action="{% url 'views.projects_render_view' %}" method="POST">
        <div>
            {% csrf_token %}
            {{ form_search_project.name }}
            <button type="submit"><i class="fa fa-search"></i></button>
        </div>
    </form>

    <table class="table table-striped project-table">

        <thead>
            <th>Nombre</th>
            <th>Código</th>
            <th>Tipo de proyecto</th>
            <th>Descripción</th>
            <th>Fecha Límite</th>
            <th>Foto</th>
        </thead>

    {% for project in projects %}
        <tr class="{{ project.state.name }}">

            <td><a href="/proyectos/{{ project.id }}">{{ project.name }}</a></td>
            <td>{{ project.id }}</td>
            <td>{{ project.project_type.name }}</td>
            <td>{{ project.description }}</td>
            <td>{{ project.deadline }}</td>
            <td><img src="{{ project.photo.url }}"></td>
        </tr>
    {% endfor  %}

    </table>

    {% if pagination %}
        <div class="pagination-outer row">
            <div class="pagination-inner col-md-4">
                {% if projects.has_previous %}
                    <a href="?page={{ projects.previous_page_number }}">
                        <i class="fa fa-chevron-left fa-2x"></i>
                    </a>
                {% endif %}

                <p>
                    Página {{ projects.number }} de {{ projects.paginator.num_pages }}
                </p>

                {% if projects.has_next %}
                    <a href="?page={{ projects.next_page_number }}">
                        <i class="fa fa-chevron-right fa-2x"></i>
                    </a>
                {% endif %}
            </div>
        </div>
    {% endif %}

</div> <!-- .projects-container -->


{% endblock %}